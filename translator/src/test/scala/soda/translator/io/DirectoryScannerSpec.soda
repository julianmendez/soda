package soda.translator.io


* DirectoryScannerSpec
  extends org.scalatest.funsuite.AnyFunSuite = {
  + java.io.File

  start = "translator/src/test/resources/soda/example"

  test("scan a file that is not a directory") {
    scanner = DirectoryScanner_()
    start_file = @new File(start, "Example.soda")
    expected = Seq(start_file).toSet
    obtained = scanner.get_all_files(start_file).toSet

    assert(obtained == expected)
  }

  test("simple scan of all files") {
    scanner = DirectoryScanner_()
    expected = Seq(
      "otherexample",
      "Example.md",
      "Example.scala",
      "Example.soda",
      "otherexample/OtherExample.scala",
      "otherexample/OtherExample.soda",
      "otherexample/OtherExample.txt"
    ).map(x -> @new File(start, x)).toSet
    start_file = @new File(start)
    obtained = scanner.get_all_files(start_file).toSet

    assert(obtained == expected)
  }
}

* DirectoryScannerSpec_() extends DirectoryScannerSpec

