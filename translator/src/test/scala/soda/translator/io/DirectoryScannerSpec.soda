package soda.translator.io

+ org.scalatest.funsuite.AnyFunSuite

+ java.io.File

* ScannerSpec() extends AnyFunSuite {

  start = "translator/src/test/resources/soda/example"

  test("scan a file that is not a directory") {
    scanner = DirectoryScanner()
    start_file = new File(start, "Example.soda")
    expected = Seq(start_file).toSet
    obtained = scanner.get_all_files(start_file).toSet
    assert(obtained == expected)
  }

  test("simple scan of all files") {
    scanner = DirectoryScanner()

    expected = Seq(
      "otherexample",
      "Example.md",
      "Example.scala",
      "Example.soda",
      "otherexample/OtherExample.scala",
      "otherexample/OtherExample.soda",
      "otherexample/OtherExample.txt"
    ).map(x -> new File(start, x)).toSet
    start_file = new File(start)
    obtained = scanner.get_all_files(start_file).toSet
    assert(obtained == expected)
  }

  test("simple get all Soda files") {
    scanner = DirectoryScanner()

    expected = Seq(
      "Example.soda",
      "otherexample/OtherExample.soda"
    ).map(x -> new File(start, x)).toSet
    start_file = new File(start)
    obtained = scanner.get_soda_files(start_file).toSet
    assert(obtained == expected)
  }

}

