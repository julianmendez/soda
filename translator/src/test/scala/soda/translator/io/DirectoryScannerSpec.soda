package soda.translator.io

class DirectoryScannerSpec ()
  extends
    org.scalatest.funsuite.AnyFunSuite

  import
    java.io.File

  start = "translator/src/test/resources/soda/example"

  test ("scan a file that is not a directory")
    let
      scanner = DirectoryScanner_ ()
      start_file = @new File (start, "Example.soda")
      expected = Seq (start_file).toSet
      obtained = scanner.get_all_files (start_file).toSet
    in assert (obtained == expected)

  test ("simple scan of all files")
    let
      scanner = DirectoryScanner_ ()
      expected = Seq (
        "otherexample",
        "Example.md",
        "Example.scala",
        "Example.soda",
        "otherexample/OtherExample.scala",
        "otherexample/OtherExample.soda",
        "otherexample/OtherExample.txt"
      ).map (lambda x -> @new File (start, x) ).toSet
      start_file = @new File (start)
      obtained = scanner.get_all_files (start_file).toSet
    in assert (obtained == expected)

end

