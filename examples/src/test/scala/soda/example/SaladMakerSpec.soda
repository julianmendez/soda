package soda.example


* SaladIngredient extends soda.lib.EnumConstant

* SaladIngredient_(ordinal: Int, name: String) extends SaladIngredient

* SaladIngredientConstant = {

  tomato = SaladIngredient_(1, "tomato")
  lettuce = SaladIngredient_(2, "lettuce")
  sunflower_seeds = SaladIngredient_(3, "sunflower seeds")
  olive_oil = SaladIngredient_(4, "olive_oil")

  SaladIngredient_values = Seq(tomato, lettuce, sunflower_seeds, olive_oil)
}

* SaladMakerSpec()
  extends org.scalatest.funsuite.AnyFunSuite
  with SaladIngredientConstant = {

  add_next_ingredient(salad_so_far: Seq[SaladIngredient], ingredient: SaladIngredient): Seq[SaladIngredient] =
    salad_so_far.+:(ingredient)

  has_salad_at_most_2_ingredients(salad_so_far: Seq[SaladIngredient], next_ingredient: SaladIngredient): Boolean =
    salad_so_far.length < 3

  test("salad maker") {
    instance = SaladMaker_()
    ingredients = SaladIngredient_values
    expected = Seq(sunflower_seeds, lettuce, tomato)
    obtained = instance.prepare_vegan_salad(
      list_of_ingredients := ingredients,
      initial_bowl := Seq[SaladIngredient](),
      next_ingredient_function := add_next_ingredient,
      condition_to_continue := has_salad_at_most_2_ingredients
    )

    assert(obtained == expected)
  }
}

